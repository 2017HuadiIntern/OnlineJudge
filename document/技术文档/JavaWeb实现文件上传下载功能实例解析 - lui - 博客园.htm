<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JavaWeb实现文件上传下载功能实例解析 - lui - 博客园</title>
<link type="text/css" rel="stylesheet" href="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-sea.css">
<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-sea-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/lj821022/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/lj821022/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/lj821022/wlwmanifest.xml">
<script async="" src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/analytics.js"></script><script type="text/javascript" src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/encoder.js"></script><script src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'lj821022', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="header">
	
<!--done-->
<div class="header">
	<div class="headerText">
		<a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/lj821022/">小牛爸</a><br>
		梅花香自苦寒来   弘毅、奋进   平凡之人做不平凡之事
	</div>
</div>

</div>

<div id="mytopmenu">
	
		<div id="mylinks"><a id="blog_nav_sitehome" class="menu" href="http://www.cnblogs.com/">博客园</a> &nbsp;
<a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/lj821022/">首页</a> &nbsp;
<a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a> &nbsp;
<a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/lui">联系</a> &nbsp;
<a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/lj821022/rss">订阅</a><a id="blog_nav_rss_image" href="http://www.cnblogs.com/lj821022/rss"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/xml.gif" alt="订阅"></a>&nbsp;
<a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a>
</div>
		<div id="mystats"><div id="blog_stats">
随笔-125&nbsp;
评论-47&nbsp;
文章-0&nbsp;
<!--trackbacks-2-->
</div></div>
	
</div>
<div id="centercontent">
	
<div id="post_detail">
<div class="post">
	<h1 class="postTitle"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/lj821022/p/5720605.html">JavaWeb实现文件上传下载功能实例解析</a></h1>
	<div id="cnblogs_post_body"><p>转：http://www.cnblogs.com/xdp-gacl/p/4200090.html</p>
<h1 class="YaHei">JavaWeb实现文件上传下载功能实例解析</h1>
<p>&nbsp;</p>
<p>在Web应用系统开发中，文件上传和下载功能是非常常用的功能，今天来讲一下JavaWeb中的文件上传和下载功能的实现。</p>
<p>　　对于文件上传，浏览器在上传的过程中是将文件以流的形式提交到服务器端的，如果直接使用Servlet获取上传文件的输入流然后再解析里面的请
求参数是比较麻烦，所以一般选择采用apache的开源工具common-fileupload这个文件上传组件。这个common-
fileupload上传组件的jar包可以去apache官网上面下载，也可以在struts的lib文件夹下面找到，struts上传的功能就是基于
这个实现的。common-fileupload是依赖于common-io这个包的，所以还需要下载这个包。</p>
<h2 id="blogTitle0">一、开发环境搭建</h2>
<p>　　创建一个FileUploadAndDownLoad项目，加入Apache的commons-fileupload文件上传组件的相关Jar包，如下图所示：</p>
<p>　　<img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/032130161842199.png" alt=""></p>
<h2 id="blogTitle1">二、实现文件上传</h2>
<h3 id="blogTitle2">2.1、文件上传页面和消息提示页面</h3>
<p>　　upload.jsp页面的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre> 1 &lt;%@ page language="java" pageEncoding="UTF-8"%&gt;
 2 &lt;!DOCTYPE HTML&gt;
 3 &lt;html&gt;
 4   &lt;head&gt;
 5     &lt;title&gt;文件上传&lt;/title&gt;
 6   &lt;/head&gt;
 7   
 8   &lt;body&gt;
 9     &lt;form action="${pageContext.request.contextPath}/servlet/UploadHandleServlet" enctype="multipart/form-data" method="post"&gt;
10         上传用户：&lt;input type="text" name="username"&gt;&lt;br/&gt;
11         上传文件1：&lt;input type="file" name="file1"&gt;&lt;br/&gt;
12         上传文件2：&lt;input type="file" name="file2"&gt;&lt;br/&gt;
13         &lt;input type="submit" value="提交"&gt;
14     &lt;/form&gt;
15   &lt;/body&gt;
16 &lt;/html&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　message.jsp的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre> 1 &lt;%@ page language="java" pageEncoding="UTF-8"%&gt;
 2 &lt;!DOCTYPE HTML&gt;
 3 &lt;html&gt;
 4   &lt;head&gt;
 5     &lt;title&gt;消息提示&lt;/title&gt;
 6   &lt;/head&gt;
 7   
 8   &lt;body&gt;
 9         ${message}
10   &lt;/body&gt;
11 &lt;/html&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h3 id="blogTitle3">2.2、处理文件上传的Servlet</h3>
<p>　　UploadHandleServlet的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>  1 package me.gacl.web.controller;
  2 
  3 import java.io.File;
  4 import java.io.FileOutputStream;
  5 import java.io.IOException;
  6 import java.io.InputStream;
  7 import java.util.List;
  8 import javax.servlet.ServletException;
  9 import javax.servlet.http.HttpServlet;
 10 import javax.servlet.http.HttpServletRequest;
 11 import javax.servlet.http.HttpServletResponse;
 12 import org.apache.commons.fileupload.FileItem;
 13 import org.apache.commons.fileupload.disk.DiskFileItemFactory;
 14 import org.apache.commons.fileupload.servlet.ServletFileUpload;
 15 
 16 public class UploadHandleServlet extends HttpServlet {
 17 
 18     public void doGet(HttpServletRequest request, HttpServletResponse response)
 19             throws ServletException, IOException {
 20                 //得到上传文件的保存目录，将上传的文件存放于WEB-INF目录下，不允许外界直接访问，保证上传文件的安全
 21                 String savePath = this.getServletContext().getRealPath("/WEB-INF/upload");
 22                 File file = new File(savePath);
 23                 //判断上传文件的保存目录是否存在
 24                 if (!file.exists() &amp;&amp; !file.isDirectory()) {
 25                     System.out.println(savePath+"目录不存在，需要创建");
 26                     //创建目录
 27                     file.mkdir();
 28                 }
 29                 //消息提示
 30                 String message = "";
 31                 try{
 32                     //使用Apache文件上传组件处理文件上传步骤：
 33                     //1、创建一个DiskFileItemFactory工厂
 34                     DiskFileItemFactory factory = new DiskFileItemFactory();
 35                     //2、创建一个文件上传解析器
 36                     ServletFileUpload upload = new ServletFileUpload(factory);
 37                      //解决上传文件名的中文乱码
 38                     upload.setHeaderEncoding("UTF-8"); 
 39                     //3、判断提交上来的数据是否是上传表单的数据
 40                     if(!ServletFileUpload.isMultipartContent(request)){
 41                         //按照传统方式获取数据
 42                         return;
 43                     }
 44                     //4、使用ServletFileUpload解析器解析上传数据，解析结果返回的是一个List&lt;FileItem&gt;集合，每一个FileItem对应一个Form表单的输入项
 45                     List&lt;FileItem&gt; list = upload.parseRequest(request);
 46                     for(FileItem item : list){
 47                         //如果fileitem中封装的是普通输入项的数据
 48                         if(item.isFormField()){
 49                             String name = item.getFieldName();
 50                             //解决普通输入项的数据的中文乱码问题
 51                             String value = item.getString("UTF-8");
 52                             //value = new String(value.getBytes("iso8859-1"),"UTF-8");
 53                             System.out.println(name + "=" + value);
 54                         }else{//如果fileitem中封装的是上传文件
 55                             //得到上传的文件名称，
 56                             String filename = item.getName();
 57                             System.out.println(filename);
 58                             if(filename==null || filename.trim().equals("")){
 59                                 continue;
 60                             }
 61                             //注意：不同的浏览器提交的文件名是不一样的，有些浏览器提交上来的文件名是带有路径的，如：  c:\a\b\1.txt，而有些只是单纯的文件名，如：1.txt
 62                             //处理获取到的上传文件的文件名的路径部分，只保留文件名部分
 63                             filename = filename.substring(filename.lastIndexOf("\\")+1);
 64                             //获取item中的上传文件的输入流
 65                             InputStream in = item.getInputStream();
 66                             //创建一个文件输出流
 67                             FileOutputStream out = new FileOutputStream(savePath + "\\" + filename);
 68                             //创建一个缓冲区
 69                             byte buffer[] = new byte[1024];
 70                             //判断输入流中的数据是否已经读完的标识
 71                             int len = 0;
 72                             //循环将输入流读入到缓冲区当中，(len=in.read(buffer))&gt;0就表示in里面还有数据
 73                             while((len=in.read(buffer))&gt;0){
 74                                 //使用FileOutputStream输出流将缓冲区的数据写入到指定的目录(savePath + "\\" + filename)当中
 75                                 out.write(buffer, 0, len);
 76                             }
 77                             //关闭输入流
 78                             in.close();
 79                             //关闭输出流
 80                             out.close();
 81                             //删除处理文件上传时生成的临时文件
 82                             item.delete();
 83                             message = "文件上传成功！";
 84                         }
 85                     }
 86                 }catch (Exception e) {
 87                     message= "文件上传失败！";
 88                     e.printStackTrace();
 89                     
 90                 }
 91                 request.setAttribute("message",message);
 92                 request.getRequestDispatcher("/message.jsp").forward(request, response);
 93     }
 94 
 95     public void doPost(HttpServletRequest request, HttpServletResponse response)
 96             throws ServletException, IOException {
 97 
 98         doGet(request, response);
 99     }
100 }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　在Web.xml文件中注册UploadHandleServlet</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1 &lt;servlet&gt;
2     &lt;servlet-name&gt;UploadHandleServlet&lt;/servlet-name&gt;
3     &lt;servlet-class&gt;me.gacl.web.controller.UploadHandleServlet&lt;/servlet-class&gt;
4 &lt;/servlet&gt;
5 
6 &lt;servlet-mapping&gt;
7     &lt;servlet-name&gt;UploadHandleServlet&lt;/servlet-name&gt;
8     &lt;url-pattern&gt;/servlet/UploadHandleServlet&lt;/url-pattern&gt;
9 &lt;/servlet-mapping&gt;    </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　运行效果如下：</p>
<p>&nbsp;　　<img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/032259074816790.gif" alt=""></p>
<p>　　文件上传成功之后，上传的文件保存在了WEB-INF目录下的upload目录，如下图所示：</p>
<p>　　<img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/032301344346495.png" alt=""></p>
<h3 id="blogTitle4">2.3、文件上传的细节</h3>
<p>　　上述的代码虽然可以成功将文件上传到服务器上面的指定目录当中，但是文件上传功能有许多需要注意的小细节问题，以下列出的几点需要特别注意的</p>
<p>　　<strong>1、为保证服务器安全，上传文件应该放在外界无法直接访问的目录下，比如放于WEB-INF目录下。</strong></p>
<p><strong>　　2、为防止文件覆盖的现象发生，要为上传文件产生一个唯一的文件名。</strong></p>
<p><strong>　　3、为防止一个目录下面出现太多文件，要使用hash算法打散存储。</strong></p>
<p><strong>　　4、要限制上传文件的最大值。</strong></p>
<p><strong>　　5、要<strong>限制</strong>上传文件的类型，在收到上传文件名时，判断后缀名是否合法。</strong></p>
<p>　　针对上述提出的5点细节问题，我们来改进一下UploadHandleServlet，改进后的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>  1 package me.gacl.web.controller;
  2 
  3 import java.io.File;
  4 import java.io.FileOutputStream;
  5 import java.io.IOException;
  6 import java.io.InputStream;
  7 import java.util.List;
  8 import java.util.UUID;
  9 
 10 import javax.servlet.ServletException;
 11 import javax.servlet.http.HttpServlet;
 12 import javax.servlet.http.HttpServletRequest;
 13 import javax.servlet.http.HttpServletResponse;
 14 import org.apache.commons.fileupload.FileItem;
 15 import org.apache.commons.fileupload.FileUploadBase;
 16 import org.apache.commons.fileupload.ProgressListener;
 17 import org.apache.commons.fileupload.disk.DiskFileItemFactory;
 18 import org.apache.commons.fileupload.servlet.ServletFileUpload;
 19 
 20 /**
 21 * @ClassName: UploadHandleServlet
 22 * @Description: TODO(这里用一句话描述这个类的作用)
 23 * @author: 孤傲苍狼
 24 * @date: 2015-1-3 下午11:35:50
 25 *
 26 */ 
 27 public class UploadHandleServlet extends HttpServlet {
 28 
 29     public void doGet(HttpServletRequest request, HttpServletResponse response)
 30             throws ServletException, IOException {
 31                 //得到上传文件的保存目录，将上传的文件存放于WEB-INF目录下，不允许外界直接访问，保证上传文件的安全
 32                 String savePath = this.getServletContext().getRealPath("/WEB-INF/upload");
 33                 //上传时生成的临时文件保存目录
 34                 String tempPath = this.getServletContext().getRealPath("/WEB-INF/temp");
 35                 File tmpFile = new File(tempPath);
 36                 if (!tmpFile.exists()) {
 37                     //创建临时目录
 38                     tmpFile.mkdir();
 39                 }
 40                 
 41                 //消息提示
 42                 String message = "";
 43                 try{
 44                     //使用Apache文件上传组件处理文件上传步骤：
 45                     //1、创建一个DiskFileItemFactory工厂
 46                     DiskFileItemFactory factory = new DiskFileItemFactory();
 47                     //设置工厂的缓冲区的大小，当上传的文件大小超过缓冲区的大小时，就会生成一个临时文件存放到指定的临时目录当中。
 48                     factory.setSizeThreshold(1024*100);//设置缓冲区的大小为100KB，如果不指定，那么缓冲区的大小默认是10KB
 49                     //设置上传时生成的临时文件的保存目录
 50                     factory.setRepository(tmpFile);
 51                     //2、创建一个文件上传解析器
 52                     ServletFileUpload upload = new ServletFileUpload(factory);
 53                     //监听文件上传进度
 54                     upload.setProgressListener(new ProgressListener(){
 55                         public void update(long pBytesRead, long pContentLength, int arg2) {
 56                             System.out.println("文件大小为：" + pContentLength + ",当前已处理：" + pBytesRead);
 57                             /**
 58                              * 文件大小为：14608,当前已处理：4096
 59                                 文件大小为：14608,当前已处理：7367
 60                                 文件大小为：14608,当前已处理：11419
 61                                 文件大小为：14608,当前已处理：14608
 62                              */
 63                         }
 64                     });
 65                      //解决上传文件名的中文乱码
 66                     upload.setHeaderEncoding("UTF-8"); 
 67                     //3、判断提交上来的数据是否是上传表单的数据
 68                     if(!ServletFileUpload.isMultipartContent(request)){
 69                         //按照传统方式获取数据
 70                         return;
 71                     }
 72                     
 73                     //设置上传单个文件的大小的最大值，目前是设置为1024*1024字节，也就是1MB
 74                     upload.setFileSizeMax(1024*1024);
 75                     //设置上传文件总量的最大值，最大值=同时上传的多个文件的大小的最大值的和，目前设置为10MB
 76                     upload.setSizeMax(1024*1024*10);
 77                     //4、使用ServletFileUpload解析器解析上传数据，解析结果返回的是一个List&lt;FileItem&gt;集合，每一个FileItem对应一个Form表单的输入项
 78                     List&lt;FileItem&gt; list = upload.parseRequest(request);
 79                     for(FileItem item : list){
 80                         //如果fileitem中封装的是普通输入项的数据
 81                         if(item.isFormField()){
 82                             String name = item.getFieldName();
 83                             //解决普通输入项的数据的中文乱码问题
 84                             String value = item.getString("UTF-8");
 85                             //value = new String(value.getBytes("iso8859-1"),"UTF-8");
 86                             System.out.println(name + "=" + value);
 87                         }else{//如果fileitem中封装的是上传文件
 88                             //得到上传的文件名称，
 89                             String filename = item.getName();
 90                             System.out.println(filename);
 91                             if(filename==null || filename.trim().equals("")){
 92                                 continue;
 93                             }
 94                             //注意：不同的浏览器提交的文件名是不一样的，有些浏览器提交上来的文件名是带有路径的，如：  c:\a\b\1.txt，而有些只是单纯的文件名，如：1.txt
 95                             //处理获取到的上传文件的文件名的路径部分，只保留文件名部分
 96                             filename = filename.substring(filename.lastIndexOf("\\")+1);
 97                             //得到上传文件的扩展名
 98                             String fileExtName = filename.substring(filename.lastIndexOf(".")+1);
 99                             //如果需要限制上传的文件类型，那么可以通过文件的扩展名来判断上传的文件类型是否合法
100                             System.out.println("上传的文件的扩展名是："+fileExtName);
101                             //获取item中的上传文件的输入流
102                             InputStream in = item.getInputStream();
103                             //得到文件保存的名称
104                             String saveFilename = makeFileName(filename);
105                             //得到文件的保存目录
106                             String realSavePath = makePath(saveFilename, savePath);
107                             //创建一个文件输出流
108                             FileOutputStream out = new FileOutputStream(realSavePath + "\\" + saveFilename);
109                             //创建一个缓冲区
110                             byte buffer[] = new byte[1024];
111                             //判断输入流中的数据是否已经读完的标识
112                             int len = 0;
113                             //循环将输入流读入到缓冲区当中，(len=in.read(buffer))&gt;0就表示in里面还有数据
114                             while((len=in.read(buffer))&gt;0){
115                                 //使用FileOutputStream输出流将缓冲区的数据写入到指定的目录(savePath + "\\" + filename)当中
116                                 out.write(buffer, 0, len);
117                             }
118                             //关闭输入流
119                             in.close();
120                             //关闭输出流
121                             out.close();
122                             //删除处理文件上传时生成的临时文件
123                             //item.delete();
124                             message = "文件上传成功！";
125                         }
126                     }
127                 }catch (FileUploadBase.FileSizeLimitExceededException e) {
128                     e.printStackTrace();
129                     request.setAttribute("message", "单个文件超出最大值！！！");
130                     request.getRequestDispatcher("/message.jsp").forward(request, response);
131                     return;
132                 }catch (FileUploadBase.SizeLimitExceededException e) {
133                     e.printStackTrace();
134                     request.setAttribute("message", "上传文件的总的大小超出限制的最大值！！！");
135                     request.getRequestDispatcher("/message.jsp").forward(request, response);
136                     return;
137                 }catch (Exception e) {
138                     message= "文件上传失败！";
139                     e.printStackTrace();
140                 }
141                 request.setAttribute("message",message);
142                 request.getRequestDispatcher("/message.jsp").forward(request, response);
143     }
144     
145     /**
146     * @Method: makeFileName
147     * @Description: 生成上传文件的文件名，文件名以：uuid+"_"+文件的原始名称
148     * @Anthor:孤傲苍狼
149     * @param filename 文件的原始名称
150     * @return uuid+"_"+文件的原始名称
151     */ 
152     private String makeFileName(String filename){  //2.jpg
153         //为防止文件覆盖的现象发生，要为上传文件产生一个唯一的文件名
154         return UUID.randomUUID().toString() + "_" + filename;
155     }
156     
157     /**
158      * 为防止一个目录下面出现太多文件，要使用hash算法打散存储
159     * @Method: makePath
160     * @Description: 
161     * @Anthor:孤傲苍狼
162     *
163     * @param filename 文件名，要根据文件名生成存储目录
164     * @param savePath 文件存储路径
165     * @return 新的存储目录
166     */ 
167     private String makePath(String filename,String savePath){
168         //得到文件名的hashCode的值，得到的就是filename这个字符串对象在内存中的地址
169         int hashcode = filename.hashCode();
170         int dir1 = hashcode&amp;0xf;  //0--15
171         int dir2 = (hashcode&amp;0xf0)&gt;&gt;4;  //0-15
172         //构造新的保存目录
173         String dir = savePath + "\\" + dir1 + "\\" + dir2;  //upload\2\3  upload\3\5
174         //File既可以代表文件也可以代表目录
175         File file = new File(dir);
176         //如果目录不存在
177         if(!file.exists()){
178             //创建目录
179             file.mkdirs();
180         }
181         return dir;
182     }
183 
184     public void doPost(HttpServletRequest request, HttpServletResponse response)
185             throws ServletException, IOException {
186 
187         doGet(request, response);
188     }
189 }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　针对上述提出的5点小细节问题进行改进之后，我们的文件上传功能就算是做得比较完善了。</p>
<h2 id="blogTitle5">三、文件下载</h2>
<h3 id="blogTitle6">3.1、列出提供下载的文件资源</h3>
<p>　　我们要将Web应用系统中的文件资源提供给用户进行下载，首先我们要有一个页面列出上传文件目录下的所有文件，当用户点击文件下载超链接时就进行下载操作，编写一个ListFileServlet，用于列出Web应用系统中所有下载文件。</p>
<p>　　ListFileServlet的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre> 1 package me.gacl.web.controller;
 2 
 3 import java.io.File;
 4 import java.io.IOException;
 5 import java.util.HashMap;
 6 import java.util.Map;
 7 import javax.servlet.ServletException;
 8 import javax.servlet.http.HttpServlet;
 9 import javax.servlet.http.HttpServletRequest;
10 import javax.servlet.http.HttpServletResponse;
11 
12 /**
13 * @ClassName: ListFileServlet
14 * @Description: 列出Web系统中所有下载文件
15 * @author: 孤傲苍狼
16 * @date: 2015-1-4 下午9:54:40
17 *
18 */ 
19 public class ListFileServlet extends HttpServlet {
20 
21     public void doGet(HttpServletRequest request, HttpServletResponse response)
22             throws ServletException, IOException {
23         //获取上传文件的目录
24         String uploadFilePath = this.getServletContext().getRealPath("/WEB-INF/upload");
25         //存储要下载的文件名
26         Map&lt;String,String&gt; fileNameMap = new HashMap&lt;String,String&gt;();
27         //递归遍历filepath目录下的所有文件和目录，将文件的文件名存储到map集合中
28         listfile(new File(uploadFilePath),fileNameMap);//File既可以代表一个文件也可以代表一个目录
29         //将Map集合发送到listfile.jsp页面进行显示
30         request.setAttribute("fileNameMap", fileNameMap);
31         request.getRequestDispatcher("/listfile.jsp").forward(request, response);
32     }
33     
34     /**
35     * @Method: listfile
36     * @Description: 递归遍历指定目录下的所有文件
37     * @Anthor:孤傲苍狼
38     * @param file 即代表一个文件，也代表一个文件目录
39     * @param map 存储文件名的Map集合
40     */ 
41     public void listfile(File file,Map&lt;String,String&gt; map){
42         //如果file代表的不是一个文件，而是一个目录
43         if(!file.isFile()){
44             //列出该目录下的所有文件和目录
45             File files[] = file.listFiles();
46             //遍历files[]数组
47             for(File f : files){
48                 //递归
49                 listfile(f,map);
50             }
51         }else{
52             /**
53              * 处理文件名，上传后的文件是以uuid_文件名的形式去重新命名的，去除文件名的uuid_部分
54                 file.getName().indexOf("_")检索字符串中第一次出现"_"字符的位置，如果文件名类似于：9349249849-88343-8344_阿_凡_达.avi
55                 那么file.getName().substring(file.getName().indexOf("_")+1)处理之后就可以得到阿_凡_达.avi部分
56              */
57             String realName = file.getName().substring(file.getName().indexOf("_")+1);
58             //file.getName()得到的是文件的原始名称，这个名称是唯一的，因此可以作为key，realName是处理过后的名称，有可能会重复
59             map.put(file.getName(), realName);
60         }
61     }
62     
63     public void doPost(HttpServletRequest request, HttpServletResponse response)
64             throws ServletException, IOException {
65         doGet(request, response);
66     }
67 }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　这里简单说一下ListFileServlet中listfile方法，listfile方法是用来列出目录下的所有文件的，listfile
方法内部用到了递归，在实际开发当中，我们肯定会在数据库创建一张表，里面会存储上传的文件名以及文件的具体存放目录，我们通过查询表就可以知道文件的具
体存放目录，是不需要用到递归操作的，这个例子是因为没有使用数据库存储上传的文件名和文件的具体存放位置，而上传文件的存放位置又使用了散列算法打散存
放，所以需要用到递归，在递归时，将获取到的文件名存放到从外面传递到listfile方法里面的Map集合当中，这样就可以保证所有的文件都存放在同一
个Map集合当中。</p>
<p>　　在Web.xml文件中配置ListFileServlet</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1 &lt;servlet&gt;
2      &lt;servlet-name&gt;ListFileServlet&lt;/servlet-name&gt;
3      &lt;servlet-class&gt;me.gacl.web.controller.ListFileServlet&lt;/servlet-class&gt;
4 &lt;/servlet&gt;
5  
6 &lt;servlet-mapping&gt;
7      &lt;servlet-name&gt;ListFileServlet&lt;/servlet-name&gt;
8     &lt;url-pattern&gt;/servlet/ListFileServlet&lt;/url-pattern&gt;
9 &lt;/servlet-mapping&gt;    </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　展示下载文件的listfile.jsp页面如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre> 1 &lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;
 2 &lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
 3 &lt;!DOCTYPE HTML&gt;
 4 &lt;html&gt;
 5   &lt;head&gt;
 6     &lt;title&gt;下载文件显示页面&lt;/title&gt;
 7   &lt;/head&gt;
 8   
 9   &lt;body&gt;
10       &lt;!-- 遍历Map集合 --&gt;
11     &lt;c:forEach var="me" items="${fileNameMap}"&gt;
12         &lt;c:url value="/servlet/DownLoadServlet" var="downurl"&gt;
13             &lt;c:param name="filename" value="${me.key}"&gt;&lt;/c:param&gt;
14         &lt;/c:url&gt;
15         ${me.value}&lt;a href="${downurl}"&gt;下载&lt;/a&gt;
16         &lt;br/&gt;
17     &lt;/c:forEach&gt;
18   &lt;/body&gt;
19 &lt;/html&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　访问ListFileServlet，就可以在listfile.jsp页面中显示提供给用户下载的文件资源，如下图所示：</p>
<p>　　<img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/042244025759891.png" alt=""></p>
<h3 id="blogTitle7">3.2、实现文件下载</h3>
<p>　　编写一个用于处理文件下载的Servlet，DownLoadServlet的代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre> 1 package me.gacl.web.controller;
 2 
 3 import java.io.File;
 4 import java.io.FileInputStream;
 5 import java.io.IOException;
 6 import java.io.OutputStream;
 7 import java.net.URLEncoder;
 8 import javax.servlet.ServletException;
 9 import javax.servlet.http.HttpServlet;
10 import javax.servlet.http.HttpServletRequest;
11 import javax.servlet.http.HttpServletResponse;
12 
13 public class DownLoadServlet extends HttpServlet {
14 
15     
16     public void doGet(HttpServletRequest request, HttpServletResponse response)
17             throws ServletException, IOException {
18         //得到要下载的文件名
19         String fileName = request.getParameter("filename");  //23239283-92489-阿凡达.avi
20         fileName = new String(fileName.getBytes("iso8859-1"),"UTF-8");
21         //上传的文件都是保存在/WEB-INF/upload目录下的子目录当中
22         String fileSaveRootPath=this.getServletContext().getRealPath("/WEB-INF/upload");
23         //通过文件名找出文件的所在目录
24         String path = findFileSavePathByFileName(fileName,fileSaveRootPath);
25         //得到要下载的文件
26         File file = new File(path + "\\" + fileName);
27         //如果文件不存在
28         if(!file.exists()){
29             request.setAttribute("message", "您要下载的资源已被删除！！");
30             request.getRequestDispatcher("/message.jsp").forward(request, response);
31             return;
32         }
33         //处理文件名
34         String realname = fileName.substring(fileName.indexOf("_")+1);
35         //设置响应头，控制浏览器下载该文件
36         response.setHeader("content-disposition", "attachment;filename=" + URLEncoder.encode(realname, "UTF-8"));
37         //读取要下载的文件，保存到文件输入流
38         FileInputStream in = new FileInputStream(path + "\\" + fileName);
39         //创建输出流
40         OutputStream out = response.getOutputStream();
41         //创建缓冲区
42         byte buffer[] = new byte[1024];
43         int len = 0;
44         //循环将输入流中的内容读取到缓冲区当中
45         while((len=in.read(buffer))&gt;0){
46             //输出缓冲区的内容到浏览器，实现文件下载
47             out.write(buffer, 0, len);
48         }
49         //关闭文件输入流
50         in.close();
51         //关闭输出流
52         out.close();
53     }
54     
55     /**
56     * @Method: findFileSavePathByFileName
57     * @Description: 通过文件名和存储上传文件根目录找出要下载的文件的所在路径
58     * @Anthor:孤傲苍狼
59     * @param filename 要下载的文件名
60     * @param saveRootPath 上传文件保存的根目录，也就是/WEB-INF/upload目录
61     * @return 要下载的文件的存储目录
62     */ 
63     public String findFileSavePathByFileName(String filename,String saveRootPath){
64         int hashcode = filename.hashCode();
65         int dir1 = hashcode&amp;0xf;  //0--15
66         int dir2 = (hashcode&amp;0xf0)&gt;&gt;4;  //0-15
67         String dir = saveRootPath + "\\" + dir1 + "\\" + dir2;  //upload\2\3  upload\3\5
68         File file = new File(dir);
69         if(!file.exists()){
70             //创建目录
71             file.mkdirs();
72         }
73         return dir;
74     }
75     
76     public void doPost(HttpServletRequest request, HttpServletResponse response)
77             throws ServletException, IOException {
78         doGet(request, response);
79     }
80 }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　在Web.xml文件中配置DownLoadServlet</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>1 &lt;servlet&gt;
2       &lt;servlet-name&gt;DownLoadServlet&lt;/servlet-name&gt;
3       &lt;servlet-class&gt;me.gacl.web.controller.DownLoadServlet&lt;/servlet-class&gt;
4 &lt;/servlet&gt;
5  
6 &lt;servlet-mapping&gt;
7       &lt;servlet-name&gt;DownLoadServlet&lt;/servlet-name&gt;
8       &lt;url-pattern&gt;/servlet/DownLoadServlet&lt;/url-pattern&gt;
9 &lt;/servlet-mapping&gt;    </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>　　点击【下载】超链接，将请求提交到DownLoadServlet就行处理就可以实现文件下载了，运行效果如下图所示：</p>
<p>　　<img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/042303382789974.gif" alt=""></p>
<p>　　从运行结果可以看到，我们的文件下载功能已经可以正常下载文件了。</p>
<p>　　关于JavaWeb中的文件上传和下载功能的内容就这么多。</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="http://www.cnblogs.com/lj821022/tag/java%20web%20%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/">java web 文件上传下载</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(5720605,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
            <a id="green_channel_follow" onclick="follow('6e49360b-63cf-dd11-9e4d-001cf0cd104b');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/lj821022/" target="_blank"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/sample_face.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/lj821022/">lui</a><br>
            <a href="http://home.cnblogs.com/u/lj821022/followees">关注 - 2</a><br>
            <a href="http://home.cnblogs.com/u/lj821022/followers">粉丝 - 6</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('6e49360b-63cf-dd11-9e4d-001cf0cd104b');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(5720605,'Digg')">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(5720605,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/lj821022/p/5657431.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/lj821022/p/5657431.html" title="发布于2016-07-10 12:06">【转】免装版tomcat注册成windows系统服务方法</a><br><a href="http://www.cnblogs.com/lj821022/p/5730674.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/lj821022/p/5730674.html" title="发布于2016-08-02 20:54">java   list中的对象，按对象某属性排序</a><br></div>
</div>


	<div class="postDesc">posted on <span id="post-date">2016-07-30 11:41</span> <a href="http://www.cnblogs.com/lj821022/">lui</a> 阅读(<span id="post_view_count">14305</span>) 评论(<span id="post_comment_count">1</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=5720605" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(5720605);return false;">收藏</a></div>
</div>
<script type="text/javascript">var allowComments=true,cb_blogId=15610,cb_entryId=5720605,cb_blogApp=currentBlogApp,cb_blogUserGuid='6e49360b-63cf-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2016/7/30 11:41:00';loadViewCount(cb_entryId);</script>

</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<!--done-->
<br>
<b>评论:</b>
<div class="feedbackNoItems"></div>
	

		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
			<a href="#3651100" class="layer">#1楼</a><a name="3651100" id="comment_anchor_3651100"></a><span id="comment-maxId" style="display:none;">3651100</span><span id="comment-maxDate" style="display:none;">2017/3/25 12:05:40</span>
				 <span class="comment_date">2017-03-25 12:05</span> | <a id="a_comment_author_3651100" href="http://www.cnblogs.com/Michael2397/" target="_blank">Michael2397</a> <a href="http://msg.cnblogs.com/send/Michael2397" title="发送站内短消息" class="sendMsg2This">&nbsp;</a><br>
				<div align="left"><div id="comment_body_3651100" class="blog_comment_body">请问博主有源码么？？2692613726@qq.com</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3651100,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3651100,'Bury',this)">反对(0)</a></div><span id="comment_3651100_avatar" style="display:none;">http://pic.cnblogs.com/face/777099/20160928095224.png</span>&nbsp;&nbsp;<span class="comment_actions"></span></div>
			</div>
			
			
		</div>
	



<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login('commentform');">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="http://click.aliyun.com/m/21970/" target="_blank">【阿里云】云计算科技红利邀您免费体验！云服务器、云数据库等35+产品，6个月免费使用！</a><br><a href="https://cloud.tencent.com/developer/labs?fromSource=gwzcw.241259.241259.241259" target="_blank">【免费】从零开始学编程，开发者专属实验平台免费实践！</a><br><a href="https://www.upyun.com/618?utm_source=cnblogs&amp;utm_medium=referral&amp;utm_content=618" target="_blank">【推荐】又拍云年中大促！现在注册，充值最高送4800元</a><br></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"><a href="https://cn.udacity.com/course/front-end-web-developer-nanodegree--nd001-cn-advanced/?utm_source=cnblogs&amp;utm_medium=referral&amp;utm_campaign=FEND04" target="_blank"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/24442-20170629184920789-1740545267.png" alt="Udacity_前端_06290712" width="300" height="250"></a></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/572850/" target="_blank">腾讯王卡福利：1元500MB全国流量 还可跨省配送</a><br> ·  <a href="http://news.cnblogs.com/n/572847/" target="_blank">华为推出三款新MateBook笔记本电脑 今日开始在美预订</a><br> ·  <a href="http://news.cnblogs.com/n/572849/" target="_blank">秘招：高清显示微信图片 只需改几个字符</a><br> ·  <a href="http://news.cnblogs.com/n/572848/" target="_blank">都不是控股股东了，乐视还拿3.5亿元给易到补充弹药</a><br> ·  <a href="http://news.cnblogs.com/n/572846/" target="_blank">滴滴插件化项目VirtualAPK开源</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"><a href="https://www.mtyun.com/activity-anniversary?site=cnblogs&amp;campaign=20170601sales" target="_blank"><img src="JavaWeb%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E5%8A%9F%E8%83%BD%E5%AE%9E%E4%BE%8B%E8%A7%A3%E6%9E%90%20-%20lui%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/24442-20170615095125603-13625507.png" alt="美团云" width="468" height="60"></a></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/570194/" target="_blank">小printf的故事：什么是真正的程序员？</a><br> ·  <a href="http://kb.cnblogs.com/page/569992/" target="_blank">程序员的工作、学习与绩效</a><br> ·  <a href="http://kb.cnblogs.com/page/569056/" target="_blank">软件开发为什么很难</a><br> ·  <a href="http://kb.cnblogs.com/page/565901/" target="_blank">唱吧DevOps的落地，微服务CI/CD的范本技术解读</a><br> ·  <a href="http://kb.cnblogs.com/page/566523/" target="_blank">程序员，如何从平庸走向理想？</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


</div>
<div id="leftcontent">
	
		<div id="leftcontentcontainer">
			
<!--done-->
<div class="newsItem">
	<div id="blog-news"><div id="profile_block">昵称：<a href="http://home.cnblogs.com/u/lj821022/">lui</a><br>园龄：<a href="http://home.cnblogs.com/u/lj821022/" title="入园时间：2005-12-07">11年6个月</a><br>粉丝：<a href="http://home.cnblogs.com/u/lj821022/followers/">6</a><br>关注：<a href="http://home.cnblogs.com/u/lj821022/followees/">2</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow('6e49360b-63cf-dd11-9e4d-001cf0cd104b')">+加关注</a></div></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" title="日历" cellspacing="0" cellpadding="0">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar('2017/05/01');return false;">&lt;</a></td><td align="center">2017年6月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar('2017/07/01');return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" abbr="日" scope="col" align="center">日</th><th class="CalDayHeader" abbr="一" scope="col" align="center">一</th><th class="CalDayHeader" abbr="二" scope="col" align="center">二</th><th class="CalDayHeader" abbr="三" scope="col" align="center">三</th><th class="CalDayHeader" abbr="四" scope="col" align="center">四</th><th class="CalDayHeader" abbr="五" scope="col" align="center">五</th><th class="CalDayHeader" abbr="六" scope="col" align="center">六</th></tr><tr><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td align="center">2</td><td class="CalWeekendDay" align="center">3</td></tr><tr><td class="CalWeekendDay" align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td class="CalWeekendDay" align="center">10</td></tr><tr><td class="CalWeekendDay" align="center">11</td><td align="center"><a href="http://www.cnblogs.com/lj821022/archive/2017/06/12.html"><u>12</u></a></td><td align="center">13</td><td align="center"><a href="http://www.cnblogs.com/lj821022/archive/2017/06/14.html"><u>14</u></a></td><td align="center">15</td><td align="center">16</td><td class="CalWeekendDay" align="center">17</td></tr><tr><td class="CalWeekendDay" align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center"><a href="http://www.cnblogs.com/lj821022/archive/2017/06/21.html"><u>21</u></a></td><td align="center">22</td><td align="center">23</td><td class="CalWeekendDay" align="center"><a href="http://www.cnblogs.com/lj821022/archive/2017/06/24.html"><u>24</u></a></td></tr><tr><td class="CalWeekendDay" align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td align="center">29</td><td class="CalTodayDay" align="center">30</td><td class="CalOtherMonthDay" align="center">1</td></tr><tr><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script><br>
			<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk" type="text">&nbsp;<input onclick="zzk_go()" value="找找看" id="btnZzk" class="btn_my_zzk" type="button"></div>
<div id="widget_my_google" class="div_my_zzk"><input name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk" type="text">&nbsp;<input onclick="google_go()" value="谷歌搜索" class="btn_my_zzk" type="button"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/lj821022/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/lj821022/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/lj821022/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/lj821022/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/lj821022/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div></div><div id="sidebar_toptags" class="sidebar-block">
<h3 class="catListTitle">我的标签</h3>
<div id="MyTag">
<ul>
<li><a href="http://www.cnblogs.com/lj821022/tag/oracle/">oracle</a>(5)</li><li><a href="http://www.cnblogs.com/lj821022/tag/sql/">sql</a>(3)</li><li><a href="http://www.cnblogs.com/lj821022/tag/sqlserver/">sqlserver</a>(3)</li><li><a href="http://www.cnblogs.com/lj821022/tag/sqlserver2008r2/">sqlserver2008r2</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/spring%20mvc/">spring mvc</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/Hibernate/">Hibernate</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/c%23/">c#</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/Controller/">Controller</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/dbutils/">dbutils</a>(2)</li><li><a href="http://www.cnblogs.com/lj821022/tag/etl/">etl</a>(1)</li><li><a href="http://www.cnblogs.com/lj821022/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
		<h3 class="catListTitle">随笔分类</h3>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_0" class="listitem" href="http://www.cnblogs.com/lj821022/category/806429.html">[1] Spring MVC(3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_1" class="listitem" href="http://www.cnblogs.com/lj821022/category/43152.html">asp.net(20)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_2" class="listitem" href="http://www.cnblogs.com/lj821022/category/52133.html">C#.net(10)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_3" class="listitem" href="http://www.cnblogs.com/lj821022/category/592184.html">EA</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_4" class="listitem" href="http://www.cnblogs.com/lj821022/category/592183.html">IOS-Swift</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_5" class="listitem" href="http://www.cnblogs.com/lj821022/category/681140.html">java(26)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_6" class="listitem" href="http://www.cnblogs.com/lj821022/category/779806.html">JavaEE</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_7" class="listitem" href="http://www.cnblogs.com/lj821022/category/106794.html">Shell(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_8" class="listitem" href="http://www.cnblogs.com/lj821022/category/514121.html">silverlight(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_9" class="listitem" href="http://www.cnblogs.com/lj821022/category/121892.html">unix(2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_10" class="listitem" href="http://www.cnblogs.com/lj821022/category/700982.html">Value Investment(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_11" class="listitem" href="http://www.cnblogs.com/lj821022/category/592182.html">WEBGIS</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_12" class="listitem" href="http://www.cnblogs.com/lj821022/category/43153.html">生活随笔(4)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_13" class="listitem" href="http://www.cnblogs.com/lj821022/category/681141.html">数据库(41)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_14" class="listitem" href="http://www.cnblogs.com/lj821022/category/43492.html">学习杂记(19)</a></li>
			
				</ul>
			
	
		<h3 class="catListTitle">随笔档案</h3>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_0" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/06.html">2017年6月 (6)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_1" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/05.html">2017年5月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_2" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/04.html">2017年4月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_3" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/03.html">2017年3月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_4" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/02.html">2017年2月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_5" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2017/01.html">2017年1月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_6" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/12.html">2016年12月 (6)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_7" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/11.html">2016年11月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_8" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/09.html">2016年9月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_9" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/08.html">2016年8月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_10" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/07.html">2016年7月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_11" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/06.html">2016年6月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_12" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/05.html">2016年5月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_13" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/04.html">2016年4月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_14" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/03.html">2016年3月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_15" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/02.html">2016年2月 (4)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_16" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2016/01.html">2016年1月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_17" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/12.html">2015年12月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_18" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/11.html">2015年11月 (6)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_19" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/10.html">2015年10月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_20" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/09.html">2015年9月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_21" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/08.html">2015年8月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_22" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/07.html">2015年7月 (3)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_23" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/06.html">2015年6月 (6)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_24" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/05.html">2015年5月 (13)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_25" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/04.html">2015年4月 (5)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_26" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2015/03.html">2015年3月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_27" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2014/04.html">2014年4月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_28" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2013/12.html">2013年12月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_29" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2013/09.html">2013年9月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_30" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2012/08.html">2012年8月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_31" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2011/05.html">2011年5月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_32" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2009/09.html">2009年9月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_33" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2008/04.html">2008年4月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_34" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2008/03.html">2008年3月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_35" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2008/01.html">2008年1月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_36" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2007/11.html">2007年11月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_37" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2007/08.html">2007年8月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_38" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2007/07.html">2007年7月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_39" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2007/04.html">2007年4月 (2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_40" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2006/09.html">2006年9月 (1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_41" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2006/05.html">2006年5月 (7)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_42" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2006/04.html">2006年4月 (7)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_43" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2006/03.html">2006年3月 (7)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_44" class="listitem" href="http://www.cnblogs.com/lj821022/archive/2005/12.html">2005年12月 (2)</a></li>
			
				</ul>
			
	
		<h3 class="catListTitle">文章分类</h3>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_2_Link_0" class="listitem" href="http://www.cnblogs.com/lj821022/category/592181.html">EA</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_2_Link_1" class="listitem" href="http://www.cnblogs.com/lj821022/category/592180.html">IOS</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_2_Link_2" class="listitem" href="http://www.cnblogs.com/lj821022/category/806428.html">Spring MVC</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_2_Link_3" class="listitem" href="http://www.cnblogs.com/lj821022/category/592179.html">WEBGIS</a></li>
			
				</ul>
			
	
		<h3 class="catListTitle">相册</h3>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_3_Link_0" class="listitem" href="http://www.cnblogs.com/lj821022/gallery/43199.html" rel="nofollow">我的相册(1)</a></li>
			
				</ul>
			
	
		<h3 class="catListTitle">我的链接</h3>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_4_Link_0" class="listitem" href="http://lui96.blogcn.com/" rel="nofollow">我的另一个blog</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_4_Link_1" class="listitem" href="http://www.0733e.com/english" rel="nofollow">英语扣</a></li>
			
				</ul>
			
	
</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/lj821022/p/5720605.html#3651100">1. Re:JavaWeb实现文件上传下载功能实例解析</a></li>
        <li class="recent_comment_body">请问博主有源码么？？2692613726@qq.com</li>
        <li class="recent_comment_author">--Michael2397</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/lj821022/p/4975219.html#3309378">2. Re:System.Data.OracleClient 需要 Oracle 客户端软件 8.1.7 或更高版本</a></li>
        <li class="recent_comment_body">可以深入思考一下具体的原因</li>
        <li class="recent_comment_author">--执手泪眼</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/lj821022/p/4401627.html#3157910">3. Re:C# 该行已经属于另一个表 的解决方法[转]</a></li>
        <li class="recent_comment_body">mark</li>
        <li class="recent_comment_author">--drsniper</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/lj821022/archive/2006/04/13/374422.html#2236133">4. Re:page.IsVaild体会</a></li>
        <li class="recent_comment_body">简单明了，易懂·····不错哟！</li>
        <li class="recent_comment_author">--J--Si</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/lj821022/archive/2006/05/18/403794.html#2114811">5. Re:httpRuntime 经验</a></li>
        <li class="recent_comment_body">好东西 </li>
        <li class="recent_comment_author">--木耳</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/lj821022/p/5720605.html">1. JavaWeb实现文件上传下载功能实例解析(14306)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/05/29/412209.html">2. 实现在页面中单击按钮关闭页面(8422)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2007/08/02/840623.html">3. 关于sql server2000 的1068 与 1069 问题(7536)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/09/17/506579.html">4. sql经验 convert函数转换日期(5132)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/05/28/411155.html">5. word2003中页码的设置法(4981)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<h3 class="catListTitle">评论排行榜</h3>
<div class="RecentComment" id="TopCommentsPosts">
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/lj821022/archive/2007/04/12/709792.html">1. 请教如何在页面之间传递dataSet?不用session(7)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/05/04/391401.html">2. 做完一个小网站的一点经验总结(1):  asp.net 与access数据库结合(7)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/04/25/384906.html">3. 在c#中执行sql语句时传递参数的小经验(5)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/03/23/356655.html">4. 关于在WORD文档中插入图片的问题(5)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2007/08/02/840623.html">5. 关于sql server2000 的1068 与 1069 问题(5)</a></li></ul></div>
</div></div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/lj821022/archive/2006/03/16/351302.html">1. asp.net 连接SQL2000数据库代码 整理 (1)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2006/04/13/374422.html">2. page.IsVaild体会(1)</a></li><li><a href="http://www.cnblogs.com/lj821022/archive/2007/08/02/840623.html">3. 关于sql server2000 的1068 与 1069 问题(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script></div>
	
</div>

<!--done-->
<div class="footer">
	Powered by: <a href="http://www.cnblogs.com/">博客园</a>	模板提供：<a href="http://blog.hjenglish.com/">沪江博客</a>
	Copyright ©2017 lui
</div>





</body></html>